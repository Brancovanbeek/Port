---
import PageLayout from '../layouts/PageLayout.astro';
import Hero from '../components/Hero.astro';

import SectionList from "../components/SectionList.astro";

import { getCollection } from "astro:content";
import { getSite } from '../utils/consts';
import ProjectList from '../components/ProjectList.astro';
import Social from '../components/Social.astro';

const cv = (await getCollection("cv" as any)) as any[];

const site = await getSite();
---

<PageLayout
	title={site.author.name || 'Branco'}
>
	<Hero
		title={site.author.name || 'Branco'}
		description={site.author.bio || 'Welcome to my personal website.'}
		role={site.author.role}
		location={site.author.location}
		actions={[
			{ label: 'About Me', href: '/about' },
			{ label: 'View Projects', href: '/projects' },
		]}
	/>

	<Social/>

	<ProjectList
		heading="Projects"
		limit={4}
		viewAllHref="/projects"
	/>

	            <!-- Sections (from src/content/sections.yml) -->
            {
                cv.map((section) => {
                    if (section.data.items) {
                        return (
                            <SectionList
                                heading={section.data.heading}
                                items={section.data.items}
                            />
                        );
                    }
                    return null;
                })
            }
		
</PageLayout>
